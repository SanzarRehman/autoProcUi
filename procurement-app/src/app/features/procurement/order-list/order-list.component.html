<div class="order-list-container">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <div class="title-section">
        <mat-icon class="page-icon">shopping_cart</mat-icon>
        <h1>Purchase Orders</h1>
      </div>
      <button mat-raised-button color="primary" (click)="refresh()" [disabled]="loading">
        <mat-icon>refresh</mat-icon>
        Refresh
      </button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-section" *ngIf="stats">
    <div class="stat-card">
      <div class="stat-icon" style="background: #eef2ff;">
        <mat-icon style="color: #6366f1;">receipt_long</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.totalOrders }}</div>
        <div class="stat-label">Total Orders</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: #dcfce7;">
        <mat-icon style="color: #10b981;">attach_money</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-value">${{ stats.totalAmount.toFixed(2) }}</div>
        <div class="stat-label">Total Amount</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: #fef3c7;">
        <mat-icon style="color: #f59e0b;">pending</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.ordersByStatus['PENDING'] || 0 }}</div>
        <div class="stat-label">Pending Orders</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: #d1fae5;">
        <mat-icon style="color: #10b981;">check_circle</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.ordersByStatus['APPROVED'] || 0 }}</div>
        <div class="stat-label">Approved Orders</div>
      </div>
    </div>
  </div>

  <!-- Filters -->
  <div class="controls-section">
    <div class="filters">
      <mat-form-field appearance="outline" class="filter-field">
        <mat-label>Filter by Status</mat-label>
        <mat-select [(ngModel)]="selectedStatus" (selectionChange)="onStatusChange()">
          <mat-option value="all">All Orders</mat-option>
          <mat-option value="PENDING">Pending</mat-option>
          <mat-option value="APPROVED">Approved</mat-option>
          <mat-option value="REJECTED">Rejected</mat-option>
          <mat-option value="COMPLETED">Completed</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="results-info" *ngIf="!loading">
      <span class="count">{{ orders.length }} order{{ orders.length !== 1 ? 's' : '' }}</span>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="loading">
    <div class="spinner"></div>
    <p>Loading purchase orders...</p>
  </div>

  <!-- Error State -->
  <div class="error-container" *ngIf="error && !loading">
    <mat-icon class="error-icon">error_outline</mat-icon>
    <h3>{{ error }}</h3>
    <button mat-raised-button color="primary" (click)="refresh()">
      <mat-icon>refresh</mat-icon>
      Try Again
    </button>
  </div>

  <!-- Orders Grid -->
  <div class="grid-container" *ngIf="!loading && !error">
    <ag-grid-angular
      class="ag-theme-quartz"
      [theme]="theme"
      [rowData]="orders"
      [columnDefs]="columnDefs"
      [defaultColDef]="defaultColDef"
      [pagination]="true"
      [paginationPageSize]="20"
      [domLayout]="'normal'"
      (gridReady)="onGridReady($event)"
      style="height: 600px; width: 100%;">
    </ag-grid-angular>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!loading && !error && orders.length === 0">
    <mat-icon class="empty-icon">shopping_cart</mat-icon>
    <h3>No purchase orders found</h3>
    <p>Try adjusting your filters</p>
  </div>
</div>
